{% extends "page.html" %}

{% set user = user_dict %}
{% set dataset_type = h.default_package_type() %}
{% set org_type = h.default_group_type('organization') %}
{% set group_type = h.default_group_type('group') %}

{% block subtitle %}{{ user.display_name }} {{ g.template_title_delimiter }} {{ _('Users') }}{% endblock %}

{% block breadcrumb_content %}
  {{ h.build_nav('user.index', _('Users')) }}
  {{ h.build_nav('user.read', user.display_name|truncate(35), id=user.name) }}
{% endblock %}

{% block content_action %}
  {% if h.check_access('user_update', user) %}
    <a href="{{ h.url_for('user.edit', id=user.name) }}" class="btn btn-default">
      <i class="fa fa-wrench"></i> {{ _('Manage') }}
    </a>
  {% endif %}
{% endblock %}

{% block content_primary_nav %}
  <ul class="nav nav-tabs">
    <li class="nav-item {{ 'active' if c.action == 'read' }}">
      <a href="{{ h.url_for('user.read', id=user.name) }}">
        <i class="fa fa-sitemap"></i> {{ h.humanize_entity_type('package', dataset_type, 'content tab') or _('Datasets') }}
      </a>
    </li>
    <li class="nav-item {{ 'active' if c.action == 'read_organizations' }}">
      <a href="{{ h.url_for('user.read_organizations', id=user.name) }}">
        <i class="fa fa-building"></i> {{ h.humanize_entity_type('organization', org_type, 'content tab') or _('Organizations') }}
      </a>
    </li>
    <li class="nav-item {{ 'active' if c.action == 'read_groups' }}">
      <a href="{{ h.url_for('user.read_groups', id=user.name) }}">
        <i class="fa fa-users"></i> {{ h.humanize_entity_type('group', group_type, 'content tab') or _('Groups') }}
      </a>
    </li>
    {% if h.check_access('api_token_list', {'user': user['name']}) %}
      <li class="nav-item {{ 'active' if c.action == 'api_tokens' }}">
        <a href="{{ h.url_for('user.api_tokens', id=user.name) }}">
          <i class="fa fa-key"></i> {{ _('API Tokens') }}
        </a>
      </li>
    {% endif %}
  </ul>
{% endblock %}

{% block secondary_content %}
  {% snippet "user/snippets/info.html", user=user, is_myself=is_myself, is_sysadmin=is_sysadmin, dataset_type=dataset_type, org_type=org_type, group_type=group_type, am_following=am_following %}
{% endblock %}
